import{M as e,O as t,h as n,p as r,u as i}from"./chunks/runtime-core.esm-bundler.DoAIpvg0.js";import{t as a}from"./chunks/plugin-vue_export-helper.BIFBW11O.js";const o=JSON.parse(`{"title":"Oxlint JS Plugins Preview","description":"","frontmatter":{"title":"Oxlint JS Plugins Preview","outline":[2,3],"authors":["overlookmotel","cameron"],"head":[["meta",{"property":"og:title","content":"Oxlint JS Plugins Preview"}],["meta",{"name":"twitter:title","content":"Oxlint JS Plugins Preview"}],["meta",{"property":"og:description","content":"A collection of high-performance JavaScript tools written in Rust"}],["meta",{"name":"twitter:description","content":"A collection of high-performance JavaScript tools written in Rust"}],["meta",{"property":"og:url","content":"https://oxc.rs/blog/2025-10-09-oxlint-js-plugins.html"}]]},"headers":[],"relativePath":"blog/2025-10-09-oxlint-js-plugins.md","filePath":"blog/2025-10-09-oxlint-js-plugins.md"}`);var s={name:`blog/2025-10-09-oxlint-js-plugins.md`};function c(a,o,s,c,l,u){let d=e(`AppBlogPostHeader`);return t(),i(`div`,null,[n(d),o[0]||=r(`<br><p>Earlier this year <a href="https://github.com/oxc-project/oxc/discussions/10342" target="_blank" rel="noreferrer">we asked for input from the community</a> to inform design for Oxlint support for custom JS plugins. Today, we are pleased to announce the result of many months of research, prototyping, and finally building:</p><p><strong>Oxlint supports plugins written in JS!</strong></p><h4 id="key-features" tabindex="-1">Key features <a class="header-anchor" href="#key-features" aria-label="Permalink to “Key features”">​</a></h4><ul><li>ESLint-compatible plugin API. Oxlint will be able to run many existing ESLint plugins without modification.</li><li>An alternative API which is slightly different, and unlocks better performance.</li></ul><h4 id="what-this-is-and-isn-t" tabindex="-1">What this is and isn&#39;t <a class="header-anchor" href="#what-this-is-and-isn-t" aria-label="Permalink to “What this is and isn&#39;t”">​</a></h4><p>This preview release is just the beginning. It is important to note that:</p><ul><li>This initial release does not implement all of ESLint&#39;s plugin API.</li><li>Performance is good, but it&#39;s going to get <em>way</em> better - we have many optimizations in the pipeline.</li></ul><p>The most commonly-used APIs for code-checking rules <a href="#features">are implemented</a>, so many existing ESLint rules will already work. But token-related APIs are absent, so stylistic (formatting) rules will not.</p><p>We invite users to take it for a spin, give feedback, and inform our priorities for the next phase of development.</p><h4 id="this-blog-post-covers" tabindex="-1">This blog post covers <a class="header-anchor" href="#this-blog-post-covers" aria-label="Permalink to “This blog post covers”">​</a></h4><ol><li>How to use it.</li><li>What&#39;s coming next.</li><li>Some of the technical details that enable our &quot;have cake and eat it&quot; approach of providing both ESLint compatibility <strong>and</strong> excellent performance.</li></ol><h2 id="quick-start" tabindex="-1">Quick Start <a class="header-anchor" href="#quick-start" aria-label="Permalink to “Quick Start”">​</a></h2><p>Install Oxlint in your project:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oxlint</span></span></code></pre></div><p>Write a custom JS plugin:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// plugin.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// The simplest rule of all - no debugger</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      DebuggerStatement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">report</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;No debugger!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          node,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> plugin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  meta: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;best-plugin-ever&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  rules: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;no-debugger&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: rule,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> plugin;</span></span></code></pre></div><p>Create config file enabling the plugin:</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// .oxlintrc.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;jsPlugins&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./plugin.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;rules&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;best-plugin-ever/no-debugger&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Add a file to be linted:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// foo.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">debugger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>Run Oxlint:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> oxlint</span></span></code></pre></div><p>Expect to see:</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span> x best-plugin-ever(no-debugger): No debugger!</span></span>
<span class="line"><span>  ,-[foo.js:1:1]</span></span>
<span class="line"><span>1 | debugger;</span></span>
<span class="line"><span>  : ^^^^^^^^^</span></span>
<span class="line"><span>  \`----</span></span></code></pre></div><p>For further details on authoring plugins, see <a href="/docs/guide/usage/linter/js-plugins.html">the docs</a>.</p><h2 id="alternative-api" tabindex="-1">Alternative API <a class="header-anchor" href="#alternative-api" aria-label="Permalink to “Alternative API”">​</a></h2><p>Oxlint also offers a slightly different API which unlocks better performance.</p><p><strong>This alternative API produces plugins which are compatible with ESLint, as well as Oxlint.</strong></p><p>Example rule that flags files containing more than 5 class declarations:</p><h4 id="eslint-version" tabindex="-1">ESLint version <a class="header-anchor" href="#eslint-version" aria-label="Permalink to “ESLint version”">​</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> classCount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      ClassDeclaration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        classCount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (classCount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">report</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Too many classes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, node });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h4 id="alternative-api-version" tabindex="-1">Alternative API version <a class="header-anchor" href="#alternative-api-version" aria-label="Permalink to “Alternative API version”">​</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineRule } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;oxlint&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineRule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  createOnce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Define counter variable</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> classCount;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      before</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Reset counter before traversing AST of each file</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        classCount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Same as before</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      ClassDeclaration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        classCount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (classCount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">report</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Too many classes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, node });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h4 id="the-differences" tabindex="-1">The differences <a class="header-anchor" href="#the-differences" aria-label="Permalink to “The differences”">​</a></h4><ol><li>Wrap the rule object in <code>defineRule(...)</code>.</li></ol><div class="language-diff"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">- const rule = {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ const rule = defineRule({</span></span></code></pre></div><ol start="2"><li>Use <code>createOnce</code> instead of <code>create</code>.</li></ol><div class="language-diff"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-   create(context) {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+   createOnce(context) {</span></span></code></pre></div><ol start="3"><li>Move any per-file setup from body of <code>create</code> into <code>before</code> hook.</li></ol><div class="language-diff"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">-     let classCount = 0;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+     let classCount;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      return {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+       before() {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+         classCount = 0; // Reset counter</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+       },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ClassDeclaration(node) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          classCount++;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          if (classCount === 6) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            context.report({ message: &quot;Too many classes&quot;, node });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span></code></pre></div><p>This is the only significant difference - <code>create</code> (ESLint&#39;s method) is called repeatedly <em>for each file</em>, whereas <code>createOnce</code> is called once only.</p><p>All other APIs behave exactly the same as in ESLint.</p><p>The reasons why this alternative API has potential to greatly improve performance are explained in <a href="/docs/guide/usage/linter/js-plugins.html#why-is-the-alternative-api-faster">the docs</a>.</p><h2 id="performance" tabindex="-1">Performance <a class="header-anchor" href="#performance" aria-label="Permalink to “Performance”">​</a></h2><p>As mentioned above, performance has not been our focus in this initial preview release of Oxlint JS plugins. Our primary goal has been to fill out enough of the API for JS plugins to be useful in real world projects, and gather feedback from early adopters.</p><p>Performance at present is decent, but not by any means stellar.</p><p>However - and we feel this is the important point - our prototype of the <em>next</em> version demonstrates that the architectural design we&#39;ve settled on is capable of <em>exceptional</em> performance, once various optimizations are added into the mix (see <a href="#under-the-hood">Under the hood</a>).</p><p>We&#39;ll be applying those optimization over the course of the next few months, and users will see multiple x speed-ups compared to the current version.</p><p>That said, even without those optimizations, Oxlint&#39;s performance is still competitive.</p><p>Oxlint vs ESLint linting a medium-sized TypeScript project <a href="https://github.com/vuejs/core" target="_blank" rel="noreferrer">vuejs/core</a>:</p><table tabindex="0"><thead><tr><th>Linter</th><th>Time</th></tr></thead><tbody><tr><td>ESLint</td><td>4,116 ms</td></tr><tr><td>ESLint multi-threaded</td><td>3,710 ms</td></tr><tr><td>Oxlint</td><td>48 ms</td></tr><tr><td>Oxlint with custom JS plugin</td><td>236 ms</td></tr></tbody></table><div><details><summary>Details</summary><div class="info custom-block"><p class="custom-block-title custom-block-title-default">INFO</p><ul><li>Benchmark repo: <a href="https://github.com/overlookmotel/vue-core-cam/tree/bench-js-plugins" target="_blank" rel="noreferrer">https://github.com/overlookmotel/vue-core-cam/tree/bench-js-plugins</a></li><li>Benchmarked on MacBook Air M3, 24GB RAM</li><li>Bench command:</li></ul><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hyperfine</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --warmup</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;./node_modules/.bin/oxlint --silent&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;./node_modules/.bin/oxlint -c .oxlintrc-with-custom-plugin.json --silent&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;USE_CUSTOM_PLUGIN=true ./node_modules/.bin/eslint .&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;USE_CUSTOM_PLUGIN=true ./node_modules/.bin/eslint . --concurrency=auto&#39;</span></span></code></pre></div><p>Note: The version of Oxlint on NPM at time of writing (1.23.0) has a bug which affects this benchmark, and hugely underestimates the cost of JS plugins. The above results were obtained using latest <code>main</code> branch, after the bug fix, at <a href="https://github.com/oxc-project/oxc/commit/cd266b4c101c35c33e122457cdd0b514b44597a9" target="_blank" rel="noreferrer">this commit</a>. Please also see <a href="#edit-18th-oct-2025">below</a>.</p></div></details></div><p>In this example, adding a simple JS plugin to Oxlint does have a significant cost, but Oxlint is still 15x faster than ESLint, even using ESLint&#39;s new multi-threaded runner.</p><p>Obviously, more complicated JS plugins, or many of them, will have a higher performance cost.</p><h2 id="features" tabindex="-1">Features <a class="header-anchor" href="#features" aria-label="Permalink to “Features”">​</a></h2><p>Oxlint supports most of ESLint&#39;s APIs which are typically used in plugins/rules which rely only on AST inspection. That includes most &quot;fix code&quot;-type rules.</p><p>It does not yet support token-based APIs, so stylistic (formatting) rules will not work yet.</p><h4 id="supported" tabindex="-1">Supported <a class="header-anchor" href="#supported" aria-label="Permalink to “Supported”">​</a></h4><ul><li>AST traversal</li><li>AST exploration (<code>node.parent</code>, <code>context.sourceCode.getAncestors</code>)</li><li>Fixes</li><li>Selectors (<a href="https://eslint.org/docs/latest/extend/selectors" target="_blank" rel="noreferrer">ESLint docs</a>)</li><li><code>SourceCode</code> APIs (e.g. <code>context.sourceCode.getText(node)</code>)</li></ul><h4 id="not-supported-yet" tabindex="-1">Not supported yet <a class="header-anchor" href="#not-supported-yet" aria-label="Permalink to “Not supported yet”">​</a></h4><ul><li>Language server (IDE) support</li><li>Rule options</li><li>Suggestions</li><li>Scope analysis</li><li><code>SourceCode</code> APIs related to tokens and comments (e.g. <code>context.sourceCode.getTokens(node)</code>)</li><li>Control flow analysis</li></ul><h2 id="what-s-next" tabindex="-1">What&#39;s next <a class="header-anchor" href="#what-s-next" aria-label="Permalink to “What&#39;s next”">​</a></h2><p>Over the next few months, we will be:</p><h4 id="_1-filling-out-the-plugin-api-surface" tabindex="-1">1. Filling out the plugin API surface <a class="header-anchor" href="#_1-filling-out-the-plugin-api-surface" aria-label="Permalink to “1. Filling out the plugin API surface”">​</a></h4><p>Aim is to support 100% of ESLint&#39;s plugin API surface, so that Oxlint will eventually be able to run <em>any</em> ESLint plugin without modification.</p><h4 id="_2-improving-performance" tabindex="-1">2. Improving performance <a class="header-anchor" href="#_2-improving-performance" aria-label="Permalink to “2. Improving performance”">​</a></h4><p>Performance is already decent, but we have proven during our prototyping many significant performance gains from further optimizations. We will apply them, and make JS plugins in Oxlint run at as close to Rust speed as we can get.</p><h2 id="under-the-hood" tabindex="-1">Under the hood <a class="header-anchor" href="#under-the-hood" aria-label="Permalink to “Under the hood”">​</a></h2><p>The rest of this post is not necessary to use JS plugins with Oxlint. But if you&#39;re interested in the geeky details of how our implementation works, read on...</p><h3 id="the-big-question-to-eslint-compat-or-not-to-eslint-compat" tabindex="-1">The big question: To ESLint compat or not to ESLint compat? <a class="header-anchor" href="#the-big-question-to-eslint-compat-or-not-to-eslint-compat" aria-label="Permalink to “The big question: To ESLint compat or not to ESLint compat?”">​</a></h3><p>The question which <a href="https://github.com/oxc-project/oxc/discussions/10342" target="_blank" rel="noreferrer">we posed to the community</a> earlier this year was whether Oxlint should aim for an ESLint-compatible plugin API or not.</p><p>Obviously, an ESLint-compatible interface is ideal in terms of familiarity and ease of migration from ESLint.</p><p>However, Oxlint is known for its excellent performance, and compromising that too much would not be desirable.</p><p>The main aim of our prototyping work over past few months has been to quantify what is the trade-off between performance and ESLint compatibility, and to investigate if there&#39;s a &quot;have cake and eat it&quot; solution which satisfies both - providing an ESLint-compatible API <em>and</em> acceptable performance (&quot;acceptable&quot; here means pretty damn fast!)</p><p>We believe that through a combination of different approaches, we&#39;ve found a way to satisfy both demands.</p><h3 id="alternative-api-1" tabindex="-1">Alternative API <a class="header-anchor" href="#alternative-api-1" aria-label="Permalink to “Alternative API”">​</a></h3><p>See explanation <a href="/docs/guide/usage/linter/js-plugins.html#why-is-the-alternative-api-faster">in docs</a> of why this API unlocks potential for higher performance.</p><h3 id="raw-transfer" tabindex="-1">Raw transfer <a class="header-anchor" href="#raw-transfer" aria-label="Permalink to “Raw transfer”">​</a></h3><p>Tools like Oxc represent the code of a JS/TS file as an &quot;AST&quot; (<a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree" target="_blank" rel="noreferrer">abstract syntax tree</a>). ASTs are really big - much much larger than the source code they represent.</p><p>Typically, the biggest barrier to performant interop between JS and native languages like Rust is the serialization and deserialization involved in transferring such large data structures between the &quot;two worlds&quot;.</p><p>The simplest and most common way to move an AST between JS and Rust is: Serialize the AST to JSON, send it across to JS as a string and then &quot;rehydrate&quot; it again with <code>JSON.parse</code>. But this is extremely slow. Often the cost of these conversions is so high that they massively outweigh the performance gain of using native code in the first place. Other serialization formats are more efficient than JSON, but they still have a sizeable overhead.</p><p>We have developed a scheme &quot;raw transfer&quot; which cuts out serialization altogether, by using Rust&#39;s native memory layout as the serialization format (more details on how it works <a href="https://github.com/oxc-project/oxc/issues/2409" target="_blank" rel="noreferrer">here</a>).</p><p>&quot;Raw transfer&quot; is the base of the current implementation of JS plugins.</p><h3 id="lazy-deserialization" tabindex="-1">Lazy deserialization <a class="header-anchor" href="#lazy-deserialization" aria-label="Permalink to “Lazy deserialization”">​</a></h3><p>The 2nd biggest enemy of good perf, particularly when running JS across multiple CPU cores in worker threads, is the garbage collector. Every object you create also needs to be destroyed to recover its memory. In JS, this is the job of the garbage collector. JS engines like V8 are highly optimized, but still garbage collection is an expensive process, and GC &quot;steals&quot; CPU resources from the actual workload.</p><p>We have prototyped an AST visitor which deserializes the AST <em>lazily</em>, and only deserializes the parts of the AST which actually <em>need</em> to be.</p><p>For example, if your lint rule relates to class declarations, this visitor will fly through most of the AST without doing much, and will only create JS objects for <code>ClassDeclaration</code> AST nodes, which are then passed to the rule&#39;s code to process. For the rest of the AST (variable declarations, <code>if</code> statements, functions, etc) there is no need to create node objects at all.</p><p>This has 2 effects:</p><ol><li>Raw transfer cuts the cost of serialization to zero. Laziness dramatically reduces the other side (deserialization) too.</li><li>Greatly reduced garbage collector pressure.</li></ol><p>Deno has taken a similar approach, which is explained brilliantly in <a href="https://marvinh.dev/blog/speeding-up-javascript-ecosystem-part-11/" target="_blank" rel="noreferrer">Marvin Hagemeister&#39;s blog post</a>, and Deno lint has a superbly efficient implementation.</p><p>However, we&#39;ve found that it&#39;s the combination of lazy deserialization with &quot;raw transfer&quot; which delivers <em>really</em> good performance. Our tests have found that, with both these overheads removed, JS plugins can run at much greater speed.</p><p>This optimization is not yet included in current version of JS plugins. We will implement it in a future version.</p><h2 id="try-it-out" tabindex="-1">Try it out! <a class="header-anchor" href="#try-it-out" aria-label="Permalink to “Try it out!”">​</a></h2><p>Please try out JS plugins and report your experience. All feedback - either positive or negative - is gratefully received.</p><p>In particular, if you find that Oxlint is lacking some of the APIs you need for your plugins to work, please let us know. We&#39;ll be filling in the gaps in the API over the next few months, and will prioritise those for which there&#39;s greatest demand.</p><p>Happy linting!</p><hr><h4 id="edit-18th-oct-2025" tabindex="-1">Edit: 18th Oct 2025 <a class="header-anchor" href="#edit-18th-oct-2025" aria-label="Permalink to “Edit: 18th Oct 2025”">​</a></h4><p>The original version of this blog post published on 9th Oct contained benchmarks results which showed the performance of Oxlint JS plugins to be far better than they are in reality. This was the result of a bug in Oxlint which was causing JS plugins to be skipped on many files in certain circumstances when the config contains overrides. This bug lead to the performance of JS plugins being way overestimated in the benchmarks we quoted.</p><p>We sincerely apologise for this mistake, and thank <a href="https://github.com/HerringtonDarkholme" target="_blank" rel="noreferrer">Herrington Darkholme</a> for pointing out the error.</p>`,101)])}var l=a(s,[[`render`,c]]);export{o as __pageData,l as default};